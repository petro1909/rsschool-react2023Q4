import { TVShow } from '@app_types/api/tvShow';
import { render, screen } from '@testing-library/react';
import { MemoryRouter } from 'react-router-dom';
import { describe, expect, it } from 'vitest';
import { TVShowsContext } from '../tvShows/tvShows';
import { TVShowList } from './tvShowList';

const fakeItems: TVShow[] = [
  {
    id: 71,
    title: 'Как я встретил вашу маму',
    titleOriginal: 'How I Met Your Mother',
    status: 'Canceled/Ended',
    totalSeasons: 9,
    year: 2005,
    watching: 203752,
    voted: 107228,
    rating: 4.55,
    images: [
      'deaf1f9b397829ea23dc90991c90bbbc.jpg',
      '7beaf49d396dbb763dd5fa1271c89b63.jpg',
      '4175cdf335cdc18896837b060eee3c12.jpg',
      '0959604f4ce4e7e8d312b8ef84b57084.jpg',
      '0a7c40ba87393e384c8494e4a9a284c9.jpg',
    ],
    image: 'https://media.myshows.me/shows/small/d/ea/deaf1f9b397829ea23dc90991c90bbbc.jpg',
    onlineCount: null,
    promoUrl: null,
    category: 'show',
  },
  {
    id: 68896,
    title: 'Ход королевы',
    titleOriginal: "The Queen's Gambit",
    status: 'Canceled/Ended',
    totalSeasons: 1,
    year: 2020,
    watching: 117808,
    voted: 51602,
    rating: 4.66,
    images: ['1a1619d8a1feb45b74935f3d6deb2890.jpg'],
    image: 'https://media.myshows.me/shows/small/1/a1/1a1619d8a1feb45b74935f3d6deb2890.jpg',
    onlineCount: null,
    promoUrl: null,
    category: 'show',
  },
  {
    id: 17186,
    title: 'Гримм',
    titleOriginal: 'Grimm',
    status: 'Canceled/Ended',
    totalSeasons: 6,
    year: 2011,
    watching: 112117,
    voted: 49204,
    rating: 4.1,
    images: ['e8a5cdd4c9d2530f46ecea0328bd55cb.jpg'],
    image: 'https://media.myshows.me/shows/small/e/8a/e8a5cdd4c9d2530f46ecea0328bd55cb.jpg',
    onlineCount: null,
    promoUrl: null,
    category: 'show',
  },
  {
    id: 43075,
    title: 'Королевы крика',
    titleOriginal: 'Scream Queens',
    status: 'Canceled/Ended',
    totalSeasons: 2,
    year: 2015,
    watching: 83502,
    voted: 36688,
    rating: 3.65,
    images: ['7d31d04aad367329c663348ff25da652.jpg'],
    image: 'https://media.myshows.me/shows/small/7/d3/7d31d04aad367329c663348ff25da652.jpg',
    onlineCount: null,
    promoUrl: null,
    category: 'show',
  },
  {
    id: 59261,
    title: 'Харли Квинн',
    titleOriginal: 'Harley Quinn',
    status: 'TBD/On The Bubble',
    totalSeasons: 4,
    year: 2019,
    watching: 26327,
    voted: 11214,
    rating: 4.45,
    images: ['fe87b3009756aec03cbb2e09453f6da5.jpg'],
    image: 'https://media.myshows.me/shows/small/f/e8/fe87b3009756aec03cbb2e09453f6da5.jpg',
    onlineCount: null,
    promoUrl:
      'https://hd.kinopoisk.ru/film/4b9f7ea8e40e32968321bb6696c7fabf?utm_source=myshows&utm_medium=paid_performance&utm_campaign=harleyquinn3&utm_content=main_page_popular_promo&utm_term=all&source=kinopoisk_paid_performance_myshows_harleyquinn3_main_page_popular_promo_all&erid=4CQwVszH9pQNrYToXTh',
    category: 'show',
  },
  {
    id: 139,
    title: 'Близкие друзья',
    titleOriginal: 'Queer As Folk',
    status: 'Canceled/Ended',
    totalSeasons: 5,
    year: 2000,
    watching: 25242,
    voted: 12395,
    rating: 4.38,
    images: [
      'e7ec3fe507adf6e18bf0e60c28da7de3.jpg',
      '1a839f25604920301164435c97eb1e09.jpg',
      '01056ad05cc74b58d294921b38b14278.jpg',
      '81155e916f5d9cdf2ba1b3bbb7e683d3.jpg',
      '7b2e0a8c629e440a7ccf7b4341934c86.jpg',
    ],
    image: 'https://media.myshows.me/shows/small/e/7e/e7ec3fe507adf6e18bf0e60c28da7de3.jpg',
    onlineCount: null,
    promoUrl: null,
    category: 'show',
  },
  {
    id: 38799,
    title: 'Библиотекари',
    titleOriginal: 'The Librarians',
    status: 'Canceled/Ended',
    totalSeasons: 4,
    year: 2014,
    watching: 24160,
    voted: 10096,
    rating: 3.9,
    images: ['52f59c26e75b6b39ba127665fe002329.jpg'],
    image: 'https://media.myshows.me/shows/small/5/2f/52f59c26e75b6b39ba127665fe002329.jpg',
    onlineCount: null,
    promoUrl: null,
    category: 'show',
  },
  {
    id: 27822,
    title: 'Очень приятно, Бог',
    titleOriginal: 'Kami-sama Hajimemashita',
    status: 'Canceled/Ended',
    totalSeasons: 2,
    year: 2012,
    watching: 23303,
    voted: 10864,
    rating: 4.41,
    images: ['b5bcfa71e9bbc1e73ab2131ae17b0aa9.jpg'],
    image: 'https://media.myshows.me/shows/small/b/5b/b5bcfa71e9bbc1e73ab2131ae17b0aa9.jpg',
    onlineCount: null,
    promoUrl: null,
    category: 'anime',
  },
  {
    id: 60,
    title: 'Квантовый скачок',
    titleOriginal: 'Quantum Leap',
    status: 'Canceled/Ended',
    totalSeasons: 5,
    year: 1989,
    watching: 21561,
    voted: 9865,
    rating: 4.48,
    images: ['299d2d277e1e3e558b246240c30db723.jpg'],
    image: 'https://media.myshows.me/shows/small/2/99/299d2d277e1e3e558b246240c30db723.jpg',
    onlineCount: null,
    promoUrl: null,
    category: 'show',
  },
  {
    id: 43567,
    title: 'База Куантико',
    titleOriginal: 'Quantico',
    status: 'Canceled/Ended',
    totalSeasons: 3,
    year: 2015,
    watching: 18299,
    voted: 7690,
    rating: 3.78,
    images: ['c0c254dd74f0f1351e5d4f6506cca38e.jpg'],
    image: 'https://media.myshows.me/shows/small/c/0c/c0c254dd74f0f1351e5d4f6506cca38e.jpg',
    onlineCount: null,
    promoUrl: null,
    category: 'show',
  },
];

describe('TVShowList component', () => {
  it('should rended the specified number of cards', () => {
    render(
      <TVShowsContext.Provider value={fakeItems}>
        <TVShowList />
      </TVShowsContext.Provider>,
      { wrapper: MemoryRouter }
    );
    const tvShowElementList = screen.getAllByTestId('tvShowCardElement');
    expect(tvShowElementList.length).toEqual(fakeItems.length);
  });
});
